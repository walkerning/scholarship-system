/*
    *
    * Wijmo Library 5.20171.300
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the Wijmo Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */
var __extends,wijmo;(function(n){var t;(function(t){var i;(function(i){'use strict';var r,u;(function(n){n[n.Code=0]="Code";n[n.Selection=1]="Selection";n[n.ExpandSingle=2]="ExpandSingle";n[n.ExpandMulti=3]="ExpandMulti"})(r=i.DetailVisibilityMode||(i.DetailVisibilityMode={}));u=function(){function u(t,u){var f=this;this._mode=r.ExpandSingle;this._animated=!1;this._g=t;t.mergeManager=new i.DetailMergeManager(t);t.rowHeaders.hostElement.addEventListener('click',this._hdrClick.bind(this));t.formatItem.addHandler(this._formatItem,this);t.selectionChanged.addHandler(this._selectionChanged,this);t.resizedRow.addHandler(this._resizedRow,this);t.loadingRows.addHandler(function(){f.hideDetail()});t.draggingRow.addHandler(function(n,t){t.row<n.rows.length-1&&n.rows[t.row+1]instanceof i.DetailRow&&(t.cancel=!0,f.hideDetail(t.row))});t.formatItem.addHandler(function(n,t){if(t.panel==n.cells){var r=n.rows[t.row];r instanceof i.DetailRow&&(t.cell.style.left='0')}});u&&n.copy(this,u)}return Object.defineProperty(u.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"detailVisibilityMode",{get:function(){return this._mode},set:function(t){t!=this._mode&&(this._mode=n.asEnum(t,r),this.hideDetail(),this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"maxHeight",{get:function(){return this._maxHeight},set:function(t){this._maxHeight=n.asNumber(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isAnimated",{get:function(){return this._animated},set:function(t){t!=this._animated&&(this._animated=n.asBoolean(t))},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"createDetailCell",{get:function(){return this._createDetailCellFn},set:function(t){this._createDetailCellFn=n.asFunction(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"disposeDetailCell",{get:function(){return this._disposeDetailCellFn},set:function(t){this._disposeDetailCellFn=n.asFunction(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"rowHasDetail",{get:function(){return this._rowHasDetailFn},set:function(t){this._rowHasDetailFn=n.asFunction(t,!0)},enumerable:!0,configurable:!0}),u.prototype.isDetailVisible=function(n){var t=this._g.rows;return(n=this._toIndex(n),t[n]instanceof i.DetailRow)?!0:n<t.length-1&&t[n+1]instanceof i.DetailRow?!0:!1},u.prototype.isDetailAvailable=function(n){var t=this._g.rows;return n=this._toIndex(n),this._hasDetail(n)},u.prototype.hideDetail=function(t){var r=this._g.rows,u,f;if(t==null){for(u=0;u<r.length;u++)r[u]instanceof i.DetailRow&&this.hideDetail(u);return}t=this._toIndex(t);!(r[t]instanceof i.DetailRow)&&t<r.length-1&&r[t+1]instanceof i.DetailRow&&t++;f=r[t];f instanceof i.DetailRow&&(this.disposeDetailCell&&this.disposeDetailCell(f),n.Control.disposeAll(f.detail),r.removeAt(t))},u.prototype.showDetail=function(t,r){var s,u,h,c,f,e,o;if(r===void 0&&(r=!1),s=this._g,u=s.rows,t=this._toIndex(t),t>0&&u[t]instanceof i.DetailRow&&t--,r){for(h=s.selection,c=!1,f=0;f<u.length-1;f++)f!=t&&u[f+1]instanceof i.DetailRow&&(this.hideDetail(f),f<t&&t--,f<h.row&&(h.row--,h.row2--,c=!0));c&&s.select(h,!1)}!this.isDetailVisible(t)&&this._hasDetail(t)&&(e=new i.DetailRow(u[t]),e.detail=this._createDetailCell(u[t]),e.detail&&(this._animated?(o=e.detail.style,o.transform='translateY(-100%)',o.opacity='0',u.insert(t+1,e),n.animate(function(i){i<1?(o.transform='translateY('+(-(1-i)*100).toFixed(0)+'%)',o.opacity=(i*i).toString()):(o.transform='',o.opacity='',n.Control.invalidateAll(e.detail),s.scrollIntoView(t,-1))})):(u.insert(t+1,e),s.scrollIntoView(t,-1))))},u.prototype._toIndex=function(i){return i instanceof t.Row&&(i=i.index),n.asNumber(i,!1,!0)},u.prototype._hdrClick=function(n){var u,i,f;if(!n.defaultPrevented)switch(this._mode){case r.ExpandMulti:case r.ExpandSingle:u=this._g;i=u.hitTest(n);i.row>-1&&(f=u.rows[i.row],this.isDetailVisible(i.row)?this.hideDetail(i.row):(u.select(new t.CellRange(i.row,0,i.row,u.columns.length-1)),this.showDetail(i.row,this._mode==r.ExpandSingle)),n.preventDefault())}},u.prototype._selectionChanged=function(n){var t=this;this._mode==r.Selection&&(this._toSel&&clearTimeout(this._toSel),this._toSel=setTimeout(function(){n.selection.row>-1?t.showDetail(n.selection.row,!0):t.hideDetail()},300))},u.prototype._formatItem=function(t,u){var e=this._g,f=u.panel.rows[u.row],h,o,s,c;u.panel==e.cells&&f instanceof i.DetailRow&&f.detail!=null&&(n.addClass(u.cell,'wj-detail'),u.cell.textContent='',u.cell.style.textAlign='',u.cell.appendChild(f.detail),f.height==null?(n.Control.refreshAll(u.cell),h=getComputedStyle(u.cell),o=f.detail.scrollHeight+parseInt(h.paddingTop)+parseInt(h.paddingBottom),this._maxHeight>0&&o>this._maxHeight&&(o=this._maxHeight),f.height=o,f.detail.style.height||(f.detail.style.height='100%'),s=f.detail.querySelector('.wj-flexgrid'),s&&!s.style.height&&(s.style.height='100%')):setTimeout(function(){n.Control.refreshAll(f.detail)}));(this._mode==r.ExpandMulti||this._mode==r.ExpandSingle)&&u.panel==e.rowHeaders&&u.col==0&&this._hasDetail(u.row)&&(c=u.row<e.rows.length-1&&e.rows[u.row+1]instanceof i.DetailRow,u.cell.innerHTML=c?'<span class="wj-glyph-minus"></span>':'<span class="wj-glyph-plus"></span>')},u.prototype._resizedRow=function(t,r){var u=r.panel.rows[r.row];u instanceof i.DetailRow&&u.detail&&n.Control.refreshAll(u.detail)},u.prototype._hasVisibleDetail=function(n){return n instanceof i.DetailRow||n instanceof t.GroupRow||n instanceof t._NewRowTemplate?!1:!0},u.prototype._hasDetail=function(t){return n.isFunction(this._rowHasDetailFn)?this._rowHasDetailFn(this._g.rows[t]):!0},u.prototype._createDetailCell=function(n,t){return this.createDetailCell?this.createDetailCell(n,t):null},u}();i.FlexGridDetailProvider=u})(i=t.detail||(t.detail={}))})(t=n.grid||(n.grid={}))})(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t;(function(t){'use strict';var i=function(i){function r(n){return i.call(this,n)||this}return __extends(r,i),r.prototype.getMergedRange=function(r,u,f,e){e===void 0&&(e=!0);switch(r.cellType){case n.CellType.Cell:if(r.rows[u]instanceof t.DetailRow)return new n.CellRange(u,0,u,r.columns.length-1);break;case n.CellType.RowHeader:if(r.rows[u]instanceof t.DetailRow)return new n.CellRange(u-1,f,u,f);if(u<r.rows.length-1&&r.rows[u+1]instanceof t.DetailRow)return new n.CellRange(u,f,u+1,f)}return i.prototype.getMergedRange.call(this,r,u,f,e)},r}(n.MergeManager);t.DetailMergeManager=i})(t=n.detail||(n.detail={}))})(t=n.grid||(n.grid={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t;(function(t){'use strict';var i=function(n){function t(){var t=n.call(this)||this;return t.isReadOnly=!0,t}return __extends(t,n),Object.defineProperty(t.prototype,"detail",{get:function(){return this._detail},set:function(n){this._detail=n},enumerable:!0,configurable:!0}),t}(n.Row);t.DetailRow=i})(t=n.detail||(n.detail={}))})(t=n.grid||(n.grid={}))}(wijmo||(wijmo={}))